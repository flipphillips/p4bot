{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "docker:build",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml build",
      "problemMatcher": []
    },
    {
      "label": "docker:up",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml up --build -d",
      "problemMatcher": []
    },
    {
      "label": "docker:down",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml down",
      "problemMatcher": []
    },
    {
      "label": "docker:login",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml exec p4bot bash -lc \"echo 'no-op login (scripts removed)'\"",
      "problemMatcher": []
    },
    {
      "label": "docker:test_p4python",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml exec p4bot python3 /srv/p4bot/app/test_p4python.py",
      "problemMatcher": []
    },
    {
      "label": "docker:p4status",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml exec p4bot bash -lc \"python3 /srv/p4bot/app/p4status.py --limit 3\"",
      "problemMatcher": []
    },
    {
      "label": "docker:logs",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml logs -f",
      "problemMatcher": []
    },
    {
      "label": "docker:exec",
      "type": "shell",
      "command": "${input:dockerExecCommand}",
      "problemMatcher": []
    },
    {
      "label": "docker:dev-test",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml up --build -d && docker compose -f Docker/docker-compose.yml exec p4bot python3 /srv/p4bot/app/test_p4python.py",
      "problemMatcher": []
    },
    {
      "label": "docker:rebuild",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml build --no-cache",
      "problemMatcher": []
    },
    {
      "label": "docker:rebuild-reopen",
      "type": "shell",
      "command": "docker compose -f Docker/docker-compose.yml down && docker compose -f Docker/docker-compose.yml build --no-cache && docker compose -f Docker/docker-compose.yml up -d",
      "problemMatcher": []
    }
  ],
  "inputs": [
    {
      "id": "dockerExecCommand",
      "type": "promptString",
      "description": "Command to run inside the p4bot service (example: bash -lc 'ls -la /srv/p4bot/app')",
      "default": "docker compose -f Docker/docker-compose.yml exec p4bot bash -lc 'bash'"
    }
  ]
}